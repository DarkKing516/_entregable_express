<!-- src/views/permisos.ejs -->
<h1>Permisos</h1>
<form method="post" action="/configuracion/<%= configuracion._id %>/actualizarPermisos">
    <% if (configuracion.permisos && configuracion.permisos.length > 0) { %>
        <% configuracion.permisos.forEach(permiso => { %>
            <div>
                <input type="checkbox" id="<%= permiso.nombre_permiso %>" name="permisos" value="<%= permiso.nombre_permiso %>" <% if (permiso.estado_permiso) { %>checked<% } %>>
                <label for="<%= permiso.nombre_permiso %>"><%= permiso.nombre_permiso %></label>
                <button type="button" onclick="togglePermiso('<%= permiso.nombre_permiso %>')">Cambiar Estado</button>

            </div>
        <% }); %>
    <% } else { %>
        <div>No hay permisos asignados</div>
    <% } %>
    <button type="submit">Guardar Permisos</button>
</form>

<script>
    function togglePermiso(nombrePermiso) {
      const checkbox = document.querySelector(`input[name="permisos"][value="${nombrePermiso}"]`);
      checkbox.checked = !checkbox.checked;
    }
  </script>
<button><a href="/configuracion">Volver a la lista de usuarios</a></button>